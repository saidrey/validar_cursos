<app-navbar></app-navbar>

<main *ngIf="!cargando && curso">
  <!-- Hero Section con Imagen de Fondo -->
  <section class="relative h-[70vh] w-full overflow-hidden bg-navy-blue">
    <img [src]="curso.imagen || 'https://via.placeholder.com/1920x1080'" 
         [alt]="curso.nombre"
         class="absolute inset-0 w-full h-full object-cover opacity-60">
    <div class="absolute inset-0 bg-gradient-to-t from-navy-blue via-transparent to-navy-blue/30"></div>
    
    <div class="relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col justify-end pb-16">
      <div class="max-w-3xl">
        <div class="flex items-center gap-2 mb-4">
          <span class="bg-primary px-3 py-1 rounded text-[10px] font-bold text-white uppercase tracking-widest">Certificado</span>
        </div>
        
        <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-tight">{{ curso.nombre }}</h1>
        
        <div class="flex flex-wrap items-center gap-6 text-white/90">
          <div class="flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">schedule</span>
            <span class="text-sm font-medium">{{ curso.duracion }}</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">language</span>
            <span class="text-sm font-medium">Español</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">devices</span>
            <span class="text-sm font-medium">Acceso en todos los dispositivos</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Beneficios -->
    <section class="py-10 border-slate-100">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
        <div class="text-center md:text-left">
          <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-primary mb-4 mx-auto md:mx-0">
            <span class="material-symbols-outlined">workspace_premium</span>
          </div>
          <h3 class="font-bold text-navy-blue mb-2">Certificación Oficial</h3>
          <!-- <p class="text-sm text-slate-500">Título avalado por la industria tecnológica global.</p> -->
        </div>
        
        <div class="text-center md:text-left">
          <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-primary mb-4 mx-auto md:mx-0">
            <span class="material-symbols-outlined">groups</span>
          </div>
          <h3 class="font-bold text-navy-blue mb-2">Comunidad Privada</h3>
          <!-- <p class="text-sm text-slate-500">Acceso exclusivo a foros y networking con alumnos.</p> -->
        </div>
        
        <div class="text-center md:text-left">
          <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center text-primary mb-4 mx-auto md:mx-0">
            <span class="material-symbols-outlined">update</span>
          </div>
          <h3 class="font-bold text-navy-blue mb-2">Acceso de por Vida</h3>
          <!-- <p class="text-sm text-slate-500">Actualizaciones constantes del temario incluidas.</p> -->
        </div>
      </div>
    </section>

    <!-- Sobre el Curso -->
    <section class="py-10">
      <div>
        <h2 class="text-3xl font-bold text-navy-blue mb-6">Sobre este curso</h2>
        <div class="prose prose-slate max-w-none text-slate-600 leading-relaxed space-y-4">
          <p>{{ curso.descripcion }}</p>
          <p>Este programa está diseñado para llevarte desde los fundamentos hasta un nivel profesional, con un enfoque práctico basado en proyectos reales del mundo laboral.</p>
        </div>
      </div>

      <!-- <div class="grid grid-cols-1 gap-6 pt-8">
        <div class="bg-slate-50 p-8 rounded-3xl border border-slate-100">
          <h4 class="font-bold text-navy-blue mb-4">¿Qué aprenderás?</h4>
          <ul class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <li *ngFor="let item of resumenItems" class="flex items-start gap-3 text-sm text-slate-600">
              <span class="material-symbols-outlined text-green-500 text-lg">check_circle</span>
              {{ item.replace('•', '').trim() }}
            </li>
          </ul>
        </div>
      </div> -->
    </section>

    <!-- Instructor -->
    <!-- <section class="py-20 border-t border-slate-100">...</section> -->

    <!-- ── Inscripción Gratuita + Certificado ─────────────── -->
    <section class="py-10 border-t border-slate-100">
      <div class="curso-gratis-card">
        <div class="curso-gratis-left">
          <div class="gratis-badge-grande">
            <span class="material-symbols-outlined">celebration</span>
            100% GRATIS
          </div>
          <h2 class="gratis-titulo">¡Aprende sin límites!</h2>
          <p class="gratis-desc">
            Puedes realizar <strong>todos los cursos que desees</strong> sin ningún costo.
            Regístrate, estudia a tu ritmo y obtén conocimientos de calidad completamente gratis.
          </p>
          <ul class="gratis-lista">
            <li>
              <span class="material-symbols-outlined">check_circle</span>
              Acceso ilimitado a todos los cursos
            </li>
            <li>
              <span class="material-symbols-outlined">check_circle</span>
              Aprende a tu propio ritmo, sin fechas límite
            </li>
            <li>
              <span class="material-symbols-outlined">check_circle</span>
              Evaluaciones y exámenes incluidos sin costo
            </li>
          </ul>
          <button class="gratis-btn" (click)="abrirModal()">
            <span class="material-symbols-outlined">workspace_premium</span>
            ¿Cómo obtengo mi certificado?
          </button>
        </div>
        <div class="curso-gratis-right">
          <div class="cert-info-card">
            <div class="cert-info-header">
              <span class="material-symbols-outlined">workspace_premium</span>
              <span>Obtén tu Certificado</span>
            </div>
            <p class="cert-info-desc">
              Al aprobar el examen del curso, envía tu comprobante de pago por cualquiera de estos medios y recibirás tu certificado en PDF:
            </p>
            <a class="cert-contacto" href="mailto:examenes@aulavirtualcentrodecompetencia.com">
              <span class="material-symbols-outlined">mail</span>
              <span>examenes&#64;aulavirtualcentrodecompetencia.com</span>
            </a>
            <a class="cert-contacto cert-wa" href="https://wa.me/573332669399" target="_blank" rel="noopener">
              <span class="material-symbols-outlined">chat</span>
              <span>WhatsApp: 333 266 9399</span>
            </a>
            <p class="cert-nota">Recibirás tu certificado a vuelta de correo en formato PDF.</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- Loading State -->
<div *ngIf="cargando" class="min-h-screen flex items-center justify-center">
  <div class="text-center">
    <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
    <p class="mt-4 text-slate-500">Cargando curso...</p>
  </div>
</div>

<app-footer *ngIf="!cargando"></app-footer>

<!-- Sticky Bottom Bar -->
<div *ngIf="!cargando && curso"
     class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-slate-200 z-[60] py-4 px-4 sm:px-6 lg:px-8 shadow-[0_-10px_25px_-5px_rgba(0,0,0,0.1)]">
  <div class="max-w-7xl mx-auto flex items-center justify-between">
    <div class="hidden sm:flex flex-col gap-0.5">
      <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Inscripción</span>
      <div class="flex items-center gap-2">
        <span class="sticky-gratis-badge">GRATIS</span>
        <span class="text-xs text-slate-500">Todos los cursos sin costo</span>
      </div>
    </div>

    <div class="flex items-center gap-3 w-full sm:w-auto">
      <span class="sticky-gratis-badge sm:hidden">GRATIS</span>
      <a [routerLink]="['/cursos', curso.id, 'contenido']"
         class="flex-1 sm:flex-none bg-white hover:bg-slate-50 text-primary border-2 border-primary px-6 py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2">
        <span class="material-symbols-outlined text-lg">play_circle</span>
        Iniciar curso
      </a>
      <button (click)="abrirModal()"
              class="flex-1 sm:flex-none bg-primary hover:bg-navy-blue text-white px-8 py-3.5 rounded-xl font-bold transition-all shadow-lg shadow-primary/30 flex items-center justify-center gap-2">
        <span class="material-symbols-outlined text-lg">workspace_premium</span>
        Obtener certificado
      </button>
    </div>
  </div>
</div>

<!-- Modal: Inscripción gratuita + Certificado -->
@if (mostrarModal) {
  <div class="modal-overlay" (click)="cerrarModal()">
    <div class="modal-card" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="cerrarModal()" aria-label="Cerrar">
        <span class="material-symbols-outlined">close</span>
      </button>

      <div class="modal-gratis-banner">
        <span class="material-symbols-outlined modal-gratis-icon">celebration</span>
        <span class="modal-gratis-text">100% GRATIS</span>
      </div>

      <h2 class="modal-titulo">¡Aprende sin costo!</h2>
      <p class="modal-subtitulo">{{ curso?.nombre }}</p>

      <p class="modal-desc">
        Puedes realizar <strong>todos nuestros cursos de forma gratuita</strong>,
        sin restricciones y a tu propio ritmo. No necesitas pagar nada para aprender.
      </p>

      <div class="modal-divider">
        <span class="material-symbols-outlined">workspace_premium</span>
        ¿Quieres tu certificado?
      </div>

      <p class="modal-cert-desc">
        Al aprobar el examen del curso, envía el comprobante de pago por cualquiera de estos medios
        y recibirás tu certificado oficial en formato PDF:
      </p>

      <div class="modal-contactos">
        <a class="modal-contacto-item" href="mailto:examenes@aulavirtualcentrodecompetencia.com">
          <span class="material-symbols-outlined">mail</span>
          <span>examenes&#64;aulavirtualcentrodecompetencia.com</span>
        </a>
        <a class="modal-contacto-item modal-contacto-wa" href="https://wa.me/573332669399" target="_blank" rel="noopener">
          <span class="material-symbols-outlined">chat</span>
          <span>WhatsApp: 333 266 9399</span>
        </a>
      </div>

      <p class="modal-nota">Recibirás tu certificado a vuelta de correo en formato PDF.</p>

      <a [routerLink]="['/cursos', curso?.id, 'contenido']"
         class="modal-btn-iniciar">
        <span class="material-symbols-outlined">play_circle</span>
        Iniciar el curso ahora — gratis
      </a>
      <button class="modal-btn-cerrar" (click)="cerrarModal()">Cerrar</button>
    </div>
  </div>
}
